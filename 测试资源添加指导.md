# 测试资源添加指导

## 1. 资源获取途径

### 1.1 图片资源

#### 1.1.1 在线随机图片API
- **Picsum Photos**：提供免费的随机图片，可指定尺寸和ID
  - 用法：`https://picsum.photos/id/1/600/800`（获取ID为1的600x800图片）
  - 支持随机ID：`https://picsum.photos/600/800`（获取随机600x800图片）

- **Unsplash Source**：提供高质量免费图片
  - 用法：`https://source.unsplash.com/random/600x800`
  - 支持主题：`https://source.unsplash.com/random/600x800/?nature`

#### 1.1.2 Android Studio内置资源
- **Material Design Icons**：Android Studio内置的Material Design图标库
  - 路径：右键点击`res`文件夹 → New → Vector Asset
  - 选择Icon Type为Material Icon
  - 搜索并选择所需图标

#### 1.1.3 本地图片
- 从网络下载图片并保存到本地
- 支持格式：JPEG、PNG
- 建议尺寸：根据不同设备分辨率提供多种尺寸

### 1.2 视频资源

#### 1.2.1 在线测试视频
- **Sample Videos**：提供免费测试视频
  - 网址：https://sample-videos.com/
  - 支持多种格式和分辨率

#### 1.2.2 录制模拟器视频
- 使用Android Studio的Screen Record功能录制模拟器屏幕
- 路径：Android Studio → View → Tool Windows → Logcat → Screen Record按钮

## 2. 资源添加步骤

### 2.1 图片资源添加

#### 2.1.1 在线图片使用
1. 在代码中直接使用URL
   ```java
   // 在PostAdapter或PostDetailActivity中
   Glide.with(context)
        .load("https://picsum.photos/id/1/600/800")
        .into(imageView);
   ```

2. 在模拟数据中使用
   ```java
   // 在MainViewModel或PostDetailActivity中
   return new Post(
           "post_001",
           "user_001",
           "测试用户",
           "https://picsum.photos/id/1/100/100", // 用户头像
           "https://picsum.photos/id/1/600/800", // 帖子图片
           // 其他参数...
   );
   ```

#### 2.1.2 本地图片添加
1. **创建资源目录**（如果不存在）
   - 右键点击`res`文件夹 → New → Directory
   - 输入目录名称：`drawable`或`mipmap`
   - 支持不同密度：`drawable-mdpi`、`drawable-hdpi`等

2. **复制图片到资源目录**
   - 将本地图片复制到创建的目录中
   - 建议使用清晰的命名规范

3. **在代码中使用**
   ```java
   // 使用资源ID
   imageView.setImageResource(R.drawable.my_image);
   
   // 在Glide中使用
   Glide.with(context)
        .load(R.drawable.my_image)
        .into(imageView);
   ```

### 2.2 视频资源添加

#### 2.2.1 在线视频使用
1. 在代码中直接使用URL
   ```java
   // 在VideoView中播放
   videoView.setVideoURI(Uri.parse("https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4"));
   videoView.start();
   ```

#### 2.2.2 本地视频添加
1. **创建raw目录**（如果不存在）
   - 右键点击`res`文件夹 → New → Directory
   - 输入目录名称：`raw`

2. **复制视频到raw目录**
   - 将本地视频复制到raw目录中
   - 建议使用清晰的命名规范

3. **在代码中使用**
   ```java
   // 使用资源ID
   videoView.setVideoResource(R.raw.my_video);
   videoView.start();
   ```

## 3. 资源命名规范

### 3.1 图片资源
- **用户头像**：`avatar_[user_id].png`（例如：`avatar_user_001.png`）
- **帖子图片**：`post_[post_id]_[index].png`（例如：`post_001_0.png`）
- **图标**：`ic_[function]_[state].xml`（例如：`ic_like_filled.xml`）

### 3.2 视频资源
- **帖子视频**：`video_[post_id]_[index].mp4`（例如：`video_001_0.mp4`）

## 4. 在代码中使用测试资源

### 4.1 模拟数据示例

```java
// 在MainViewModel.java中
private List<Post> createMockPosts() {
    List<Post> posts = new ArrayList<>();
    
    // 创建10条模拟帖子
    for (int i = 0; i < 10; i++) {
        List<String> images = new ArrayList<>();
        // 添加多张图片
        for (int j = 0; j < (i % 3) + 1; j++) {
            // 使用在线随机图片
            images.add("https://picsum.photos/id/" + (i * 3 + j + 1) + "/600/" + (800 + i * 100));
        }
        
        Post post = new Post(
                "post_" + i,
                "user_" + (i % 5),
                "测试用户" + (i % 5),
                "https://picsum.photos/id/" + (i % 5 + 1) + "/100/100", // 用户头像
                "这是第" + i + "条帖子的内容，用于测试瀑布流布局和图片加载功能。",
                images,
                1000 + i,
                500 + i,
                100 + i,
                i % 2 == 0, // 点赞状态
                false,
                false,
                0,
                "2025-12-04T12:0" + i + ":00Z"
        );
        
        posts.add(post);
    }
    
    return posts;
}
```

### 4.2 在布局文件中使用

```xml
<!-- 在item_post.xml中 -->
<ImageView
    android:id="@+id/post_image"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:scaleType="centerCrop"
    android:background="@color/gray"
    android:layout_marginBottom="8dp" />
```

## 5. 验证实际显示效果

### 5.1 运行应用
1. 连接设备或启动模拟器
2. 点击Run按钮运行应用
3. 查看首页瀑布流布局和帖子详情页

### 5.2 检查图片加载
1. 检查图片是否正确显示
2. 检查瀑布流布局是否错落有致
3. 检查图片加载是否流畅

### 5.3 检查视频播放（如果有）
1. 检查视频是否能够正常播放
2. 检查视频控制是否正常

## 6. 最佳实践

1. **使用适当尺寸的图片**：根据不同设备分辨率提供合适尺寸的图片
2. **优化图片大小**：使用工具压缩图片，减少APK大小
3. **使用Glide加载图片**：利用Glide的缓存机制和加载优化
4. **添加占位图**：在图片加载过程中显示占位图，提升用户体验
5. **处理加载错误**：添加错误图片，处理图片加载失败情况

```java
// Glide最佳实践
Glide.with(context)
     .load(imageUrl)
     .centerCrop()
     .placeholder(R.drawable.ic_placeholder_square)
     .error(R.drawable.ic_placeholder_square)
     .into(imageView);
```

## 7. 常见问题及解决方案

### 7.1 图片不显示
- 检查URL是否正确
- 检查网络连接
- 检查Glide配置是否正确
- 检查图片权限是否添加

### 7.2 视频无法播放
- 检查视频格式是否支持
- 检查视频URL是否正确
- 检查视频权限是否添加

### 7.3 应用崩溃
- 检查资源ID是否正确
- 检查空指针异常
- 检查内存溢出问题

通过以上步骤，您可以方便地添加和使用测试资源，验证应用的实际显示效果。如果遇到问题，可以参考常见问题及解决方案，或查看相关日志信息。